"use strict";var $namespace=null,$class=null,$interface=null,$implements=null,$new=null,$def=null,$interfacedef=null,$global={};(function(n){var r="2.1.0",i={Class:"class",Interface:"interface"},t={isSystemReservedName:function(n){switch(n){case"$ctor":case"$bctor":case"$global":case"$def":case"$interfacedef":case"$new":case"$namespace":case"$extends":case"$implements":case"$_":case"joopl":case"typeKind":return!0;default:return!1}},createInstance:function(n){var t=null;return this.isFunction(n)&&(t=new n,this.isFunction(t.$base)&&(t.$base=this.createInstance(t.$base),t.$base.$_=t.$_)),t},createProperties:function(n){var t;if(Object.defineProperty){var e=function(n){return n=n.toLowerCase(),n.indexOf("get_")==0||n.indexOf("set_")==0},i=null,r=null,u=null,f=[];for(t in n)e(t)&&(i=t.substring(4),i=i.charAt(0).toLowerCase()+i.substring(1),f.indexOf(i.toLowerCase())==-1&&(f.push(i.toLowerCase()),t.indexOf("get_")==0?(u=t.replace("get_","set_"),n[u]?Object.defineProperty(n,i,{enumerable:!0,configurable:!1,get:n[t].bind(n),set:n[u].bind(n)}):Object.defineProperty(n,i,{enumerable:!0,configurable:!1,get:n[t].bind(n)})):t.indexOf("set_")==0&&(r=t.replace("set_","get_"),n[r]?Object.defineProperty(n,i,{enumerable:!0,configurable:!1,get:n[r].bind(n),set:n[t].bind(n)}):Object.defineProperty(n,i,{enumerable:!0,configurable:!1,get:n[t].bind(n)}))));n.$base&&n.$base.joopl&&this.createProperties(n.$base)}},createFields:function(n,i){n.$_=t.hasValue(i)?i:{},t.hasValue(n.$base)&&this.createFields(n.$base,n.$_)},inherits:function(n,t){var r,i;if(t!=null){if(!this.isFunction(t)||!this.isFunction(n))throw new Error("Parent and/or derived member must be a type");for(r in t.prototype.$_)this.hasValue(n.prototype.$_[r])||(n.prototype.$_[r]=t.prototype.$_[r]);for(i in t.prototype)this.isSystemReservedName(i)||this.isFunction(t.prototype[i])&&(n.prototype[i]=t.prototype[i])}return this.hasValue(t)?t.prototype:null},hasValue:function(t){return t!==n&&t!=null},isFunction:function(n){return this.hasValue(n)&&typeof n=="function"},isArray:function(n){return this.hasValue(n)&&typeof n=="Array"},isString:function(n){return this.hasValue(n)&&typeof n=="string"}};Object.preventExtensions(t),$namespace={register:function(n,i){for(var e=t.isString(n)?n.split("."):null,r=$global,u=null,f=0;f<e.length;f++)u=e[f],t.hasValue(r[u])||(r[u]={},Object.defineProperty(r[u],"isNamespace",{get:function(){return!0},configurable:!1})),r=r[u];i&&$namespace.using(n,i,!0)},alias:function(n,t){$global[t]=n},using:function(i,r,u){var v,s,f,o;if(i===n)throw Error("Namespace import failed. No path given!");typeof i=="string"&&(i=[i]);var l=null,c=$global,h=null,a=!1,f=0,e=[];for(v in i){for(l=i[v].split(".");!a&&f<l.length;){if(h=c[l[f]],!t.hasValue(h))throw Error("Namespace '"+i+"' not found");t.hasValue(h)&&(t.hasValue(h.joopl)?a=!0:(c=h,f++))}e.push(c),c=$global,a=!1,f=0}s={},f=0;for(f in e)for(o in e[f])if(t.hasValue(s[o]))throw Error("A type called '"+o+"' in current context from another namespace already exists. Create an alias or use a full namespace paths");else(e[f][o].prototype!==n&&!e[f][o].prototype.joopl!==n||e[f][o].joopl!==n)&&(s[o]=e[f][o]);return Object.preventExtensions(s),r!==n&&typeof r=="function"?(u?r.bind(e[f])():r.length==0?r.bind(s)():r.bind($global)(s),null):s}},Object.preventExtensions($namespace),$interface={isInterface:function(n){return t.isFunction(n)?n.prototype.typeKind:n.typeKind},declare:function(n){var u=function(){},f,e;if(u.prototype.joopl=r,Object.defineProperty(u.prototype,"typeKind",{value:i.Interface,enumerable:!0}),typeof n.$extends!="Array")t.inherits(u,n.$extends);else for(f=0;f<n.$extends.length;f++)t.inherits(u,n.$extends[f]);if(n.$members)for(e in n.$members)u.prototype[e]=n.$members[e];return u},implementz:function(i,r){if(i==null)throw new $global.joopl.ArgumentNullException({ArgName:"clazz"});if(r==null)throw new $global.joopl.ArgumentNullException({ArgName:"someInterface"});if(!$class.isClass(i))throw new $global.joopl.NotClassException;if(!$interface.isInterface(r))throw new $global.joopl.NotInterfaceException;for(var u in r.prototype)if(t.isFunction(r.prototype[u])&&(!t.isFunction(i.prototype[u])||i.prototype[u]===n||i.prototype[u].length!==r.prototype[u].length))return{success:!1,memberName:u};return{success:!0,memberName:null}}},$implements=$interface.implementz,$interfacedef=$interface.declare,Object.preventExtensions($interface),Object.preventExtensions($interfacedef),Object.preventExtensions($implements),$class={isClass:function(n){return(t.isFunction(n)?n.prototype.typeKind:n.typeKind)==i.Class},inherits:function(n,i){if(!$class.isClass(n))throw Error("Not a class");if(!$class.isClass(n))throw Error("Not a class");return t.inherits(n,i)},declare:function(n){var u=function(n){$class.create(this,n)},e,f,o;if(Object.defineProperty(u.prototype,"joopl",{value:r,enumerable:!0}),Object.defineProperty(u.prototype,"typeKind",{value:i.Class,enumerable:!0}),u.prototype.$ctor=n.$constructor?n.$constructor:function(){},n.$extends&&(this.inherits(u,n.$extends),u.prototype.$base=n.$extends),n.$members)for(e in n.$members)t.isFunction(n.$members[e])&&(u.prototype[e]=n.$members[e]);if(n.$implements)if(f=null,t.isArray(n.$implements)){for(o in n.$implements)if(f=$interface.implementz(u,n.$implements[o]),!f.success)throw new $global.joopl.NotImplementedException({memberName:f.memberName});}else if(f=$interface.implementz(u,n.$implements),!f.success)throw new $global.joopl.NotImplementedException({memberName:f.memberName});return u},create:function(i,r){if($class.isClass(i)){var u=t.isFunction(i)?new i:i;return u.$base=t.createInstance(u.$base),t.createFields(u,null),u.$base!=null&&u.$base!=n&&u.$base.$base!=null&&u.$base.$base!=n&&(u.$_.$base=u.$base.$base),u.$_.$derived=u,t.createProperties(u),u.$ctor!=null&&u.$ctor.call(u,r),Object.preventExtensions(u),u}throw new $global.joopl.NotClassException;}},Object.preventExtensions($class),$new=function(){throw Error("jOOPL: $new keyboard has been deprecated! In order to instantiate classes, please use the standard JavaScript 'new' operator.");},Object.preventExtensions($new),$def=function(n){return $class.declare(n)},Object.preventExtensions($def),$namespace.register("joopl"),$global.joopl.ExceptionBase=$def({$constructor:function(n){this.$_.message=n.message,this.$_.innerException=n.innerException},$members:{get_Message:function(){return this.$_.message},get_InnerException:function(){return this.$_.innerException},toString:function(){return this.get_Message()}}}),$global.joopl.NotClassException=$def({$constructor:function(){this.$base.$ctor({Message:"Given reference is not a class definition or an instance of a class",InnerException:null})},$extends:$global.joopl.ExceptionBase}),$global.joopl.NotInterfaceException=$def({$constructor:function(){this.$base.$ctor({message:"This method is not part of interface types"})},$extends:$global.joopl.ExceptionBase}),$global.joopl.ArgumentNullException=$def({$constructor:function(n){this.$base.$ctor({message:"Argument '"+n.ArgName+"' cannot be null"}),this.$_.argName=n.ArgName},$members:{get_ArgName:function(){return this.$_.argName}},$extends:$global.joopl.ExceptionBase}),$global.joopl.NotImplementedException=$def({$constructor:function(n){this.$base.$ctor({message:!t.hasValue(n)||!t.hasValue(n.memberName)?"A method or property is not implemented":"Method or property '"+n.memberName+"' is not implemented"}),this.$_.memberName=n.memberName},$members:{get_MemberName:function(){return this.$_.memberName}},$extends:$global.joopl.ExceptionBase})})(undefined)