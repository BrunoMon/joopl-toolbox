"use strict";(function(){$namespace.register("joopl.collections",function(){this.InvalidOperationException=$def({$extends:$global.joopl.Exception,$constructor:function(n){this.$base.$ctor(n)}})})})(),function(){$namespace.register("joopl",function(){this.Convert=new($def({$members:{toObject:function(n,t){switch(typeof n){case"number":return new Number(n);case"string":return new String(n);case"boolean":return new Boolean(n);default:if(t)throw new this.ArgumentException({argName:"value",reason:"Primitive type not supported"});else return n}}}}))})}(),function(){$namespace.register("joopl.collections",function(){this.Enumerator=$def({$members:{moveNext:function(){throw new $global.joopl.NotImplementedException;},hasNext:function(){throw new $global.joopl.NotImplementedException;}}})})}(),function(){$namespace.register("joopl.collections",function(){this.Enumerable=$def({$members:{get enumerator(){throw new $global.joopl.NotImplementedException;},reverse:function(){throw new $global.joopl.NotImplementedException;},forEach:function(n){for(var t=this.$_.$derived.enumerator,i;t.hasNext();)i=t.moveNext(),n(i);return this},firstOrNull:function(n){var r=this.$_.$derived.enumerator,t=!1,i=null,u;if(n){while(!t&&r.hasNext())u=r.moveNext(),t=n(u);t&&(i=u,t=!0)}else i=r.moveNext(),t=i!=undefined;return t?i:null},first:function(n){var t=this.firstOrNull(n);if(t!==null)return t;throw new $global.joopl.InvalidOperationException({message:"Sequence contains no elements"});},last:function(n){var t=this.$_.$derived.reverse();return t.first(n)},lastOrNull:function(n){var t=this.$_.$derived.reverse();return t.firstOrNull(n)},where:function(n){var t=new $global.joopl.collections.List;return this.forEach(function(i){n(i)&&t.add(i)}),t}}})})}(),function(){$namespace.register("joopl.collections",function(){this.ListEnumerator=$def({$constructor:function(n){this.$_.itemArray=n.itemArray,this.$_.index=-1},$extends:this.Enumerator,$members:{moveNext:function(){return this.$_.itemArray[++this.$_.index]},hasNext:function(){return this.$_.index+1<this.$_.itemArray.length}}})})}(),function(){$namespace.register("joopl.collections",function(){this.List=$def({$extends:this.Enumerable,$constructor:function(){this.$_.itemArray=[]},$members:{get enumerator(){return new $global.joopl.collections.ListEnumerator({itemArray:this.$_.itemArray})},reverse:function(){for(var t=this.$_.itemArray.slice().reverse(),i=new $global.joopl.collections.List,n=0;n<t.length;n++)i.add(t[n]);return i},itemAt:function(n){return this.$_.itemArray[n]},indexOf:function(n){var i=-1,t=!1,r=this.enumerator;do i++,t=r.moveNext()==n;while(!t&&r.hasNext());return t?i:-1},add:function(n){this.$_.itemArray.push(n)},addRange:function(n){n.forEach(function(n){this.add(n)}.bind(this))},insertAt:function(n,t){this.$_.itemArray.splice(n,0,t)},replaceAt:function(n,t){this.$_.itemArray[n]=t},remove:function(n){this.removeAt(this.indexOf(n))},removeAt:function(n){this.$_.itemArray.splice(n,1)},toString:function(){return this.$_.itemArray.join()}}})})}(),function(){$namespace.register("joopl.collections",function(){this.TypedList=$def({$extends:this.List,$constructor:function(n){if(typeof n!="object"||typeof n.T!="function")throw new $global.joopl.ArgumentException({argName:"args",reason:"TypedList has no parameterless constructor. Requires the 'T' argument - collection type -"});this.$base.$ctor(),this.$_.T=n.T},$members:{get T(){return this.$_.T},indexOf:function(n){if(typeof n!="Object"&&(n=$global.joopl.Convert.toObject(n)),!(n instanceof this.T))throw new $global.joopl.ArgumentException({argName:"item",reason:"Cannot find the item index. Wrong item type"});return this.$base.indexOf(n)},add:function(n){if(typeof n!="Object"&&(n=$global.joopl.Convert.toObject(n)),!(n instanceof this.T))throw new $global.joopl.ArgumentException({argName:"item",reason:"Cannot add the item. Wrong item type"});this.$base.add(n)},addRange:function(n){n.forEach(function(n){this.add(n)}.bind(this))},insertAt:function(n,t){if(typeof t!="Object"&&(t=$global.joopl.Convert.toObject(t)),!(t instanceof this.T))throw new $global.joopl.ArgumentException({argName:"item",reason:"Cannot insert the item at the given index. Wrong item type"});this.$base.insertAt(n,t)},replaceAt:function(n,t){if(typeof t!="Object"&&(t=$global.joopl.Convert.toObject(t)),!(t instanceof this.T))throw new $global.joopl.ArgumentException({argName:"item",reason:"Cannot replace the item at the given index. Wrong item type"});this.$base.replaceAt(n,t)},remove:function(n){if(typeof n!="Object"&&(n=$global.joopl.Convert.toObject(n)),!(n instanceof this.T))throw new $global.joopl.ArgumentException({argName:"item",reason:"Cannot remove the item. Wrong item type"});this.removeAt(this.indexOf(n))}}})})}(),function(){$namespace.register("joopl.collections",function(){this.ObservableChange=new($def({$members:{get added(){return 0},get replaced(){return 1},get removed(){return 2}}}))})}(),function(){$namespace.register("joopl.collections",function(){var n=this;this.ObservableTypedList=$def({$extends:this.TypedList,$constructor:function(n){this.$base.$ctor(n)},$members:{$events:["changed"],add:function(t){this.$base.add(t),this.changed({source:this,changeKind:n.ObservableChange.added,item:t})},addRange:function(n){n.forEach(function(n){this.add(n)}.bind(this))},insertAt:function(t,i){this.$base.insertAt(t,i),this.changed({source:this,changeKind:n.ObservableChange.added,item:i})},replaceAt:function(t,i){this.$base.replaceAt(t,i),this.changed({source:this,changeKind:n.ObservableChange.replaced,oldItem:this.getItemAt(t),item:i})},remove:function(t){this.$base.remove(t),this.changed({source:this,changeKind:n.ObservableChange.removed,item:t})},removeAt:function(t){this.$base.removeAt(t),this.changed({source:this,changeKind:n.ObservableChange.removed,item:this.getItemAt(t)})}}})})}()