"use strict";(function(){$namespace.register("joopl.collections",function(){this.List=$def({$constructor:function(n){this.$_.array=n&&n.array?n.array:[]},$members:{get items(){return this.$_.array},count:function(){return this.$_.array.length},add:function(n){this.$_.array.push(n)},removeAt:function(n){var t=this.items[n];return this.items.splice(n,1),t}}})})})(),function(){$namespace.register("joopl.collections",function(){var n=$def({$members:{get itemAdded(){return 0},get itemRemoved(){return 1}},$inmutable:!0});this.ObservableListReason=new n})}(),function(){$namespace.register("joopl.collections",function(){var n=this;this.ObservableList=$def({$constructor:function(n){this.$base.$ctor(n),this.$_.changedHandlers=[]},$members:{raiseHandlers:function(n,t){for(var i in this.$_.changedHandlers)this.$_.changedHandlers[i](n,t)},addChangedListener:function(n){this.$_.changedHandlers.push(n)},add:function(t){this.$base.add(t),this.raiseHandlers(n.ObservableListReason.itemAdded,{item:t,index:this.count()-1})},removeAt:function(t){var i=this.$base.removeAt(t);return this.raiseHandlers(n.ObservableListReason.itemRemoved,{item:i,index:t}),i}},$extends:this.List})})}();var $binder=null;(function(){$namespace.register("joopl.ui",function(){var n=this,t=$def({$members:{"for":function(t){return new n.Binder({cssSelector:t})}}});$binder=new t,this.Binder=$def({$constructor:function(n){if(this.$_.boundObject=null,this.$_.element=$(n.cssSelector),this.$_.element.length==0)throw Error("Given CSS selector matched no element");},$members:{get boundObject(){return this.$_.boundObject},set boundObject(n){this.$_.boundObject=n},get element(){return this.$_.element},object:function(t){return this.boundObject=t,new n.PropertyBinder({binder:this})},collection:function(t){if(typeof t!="object"||!(t instanceof Array||t instanceof $global.joopl.collections.List))throw Error("The given argument is not an array!");return this.$_.boundObject=new $global.joopl.collections.ObservableList({array:t}),new n.CollectionBinder({binder:this})}}})})})(undefined),function(){$namespace.register("joopl.ui",function(){var n=this;this.PropertyBinder=$def({$constructor:function(n){this.$_.valueFunc=null,this.$_.boundObject=n.binder.boundObject,this.$_.element=n.binder.element,this.$_.propertyPredicate=null},$members:{get boundObject(){return this.$_.boundObject},get element(){return this.$_.element},get valueFunc(){return this.$_.valueFunc},set valueFunc(n){this.$_.valueFunc=n},get propertyPredicate(){return this.$_.propertyPredicate},set propertyPredicate(n){this.$_.propertyPredicate=n},property:function(t){if(this.propertyPredicate=t,!this.valueFunc){var i=this.element.prop("nodeName");switch(i.toLowerCase()){case"input":case"textarea":case"select":case"button":this.valueFunc=function(n){if(n)this.element.val(n);else return this.element.val()}.bind(this);break;default:this.valueFunc=function(n){if(n)this.element.text(n);else return this.element.text()}.bind(this)}}return new n.EventBinder({binder:this})}}})})}(),function(){$namespace.register("joopl.ui",function(){var n=this;this.EventBinder=$def({$constructor:function(n){this.$_.element=n.binder.element,this.$_.boundObject=n.binder.boundObject,this.$_.valueFunc=n.binder.valueFunc,this.$_.propertyPredicate=n.binder.propertyPredicate},$members:{get boundObject(){return this.$_.boundObject},get valueFunc(){return this.$_.valueFunc},get element(){return this.$_.element},get propertyPredicate(){return this.$_.propertyPredicate},event:function(t){this.element.on(t,function(){this.propertyPredicate(this.boundObject,this.valueFunc())}.bind(this));return new n.TwoWayBinder({binder:this})}}})})}(),function(){$namespace.register("joopl.ui",function(){var n=this;this.CollectionBinder=$def({$constructor:function(n){this.$_.boundObject=n.binder.boundObject,this.$_.element=n.binder.element},$members:{get observable(){return this.$_.boundObject},get element(){return this.$_.element},itemTemplate:function(n){if(this.observable.items.length>0)for(var t in this.observable.items)this.element.append(n(this.observable.items[t]));return this.observable.addChangedListener(function(t,i){var r=n(i.item,i.index);switch(t){case $global.joopl.collections.ObservableListReason.itemAdded:this.element.append(r);break;case $global.joopl.collections.ObservableListReason.itemRemoved:$(this.element.children()[i.index]).remove()}}.bind(this)),this}}})})}(),function(){$namespace.register("joopl.ui",function(){var n=this;this.TwoWayBinder=$def({$constructor:function(n){this.$_.boundObject=n.binder.boundObject,this.$_.valueFunc=n.binder.valueFunc},$members:{get boundObject(){return this.$_.boundObject},get valueFunc(){return this.$_.valueFunc},twoWay:function(){var i;if(!this.boundObject)throw Error("No object has been bound to the binder");var n={},t=this,r=function(i){Object.defineProperty(n,i,{get:function(){return t.boundObject[i]},set:function(n){t.boundObject[i]=n,t.valueFunc(n)},configurable:!1,enumerable:!0})};for(i in this.boundObject)this.boundObject.hasOwnProperty(i)&&r(i);return Object.preventExtensions(n),n}}})})}()