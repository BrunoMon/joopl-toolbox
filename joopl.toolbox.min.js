"use strict";(function(){$namespace.register("joopl.collections"),$global.joopl.collections.List=$def({$constructor:function(n){this.$_.array=n&&n.array?n.array:[]},$members:{get_Items:function(){return this.$_.array},count:function(){return this.$_.array.length},add:function(n){this.$_.array.push(n)},removeAt:function(n){var t=this.get_Items()[n];return this.get_Items().splice(n,1),t}}})})(),function(){$namespace.register("joopl.collections"),$global.joopl.collections.ObservableListReason=$new($def({$constructor:function(){},$members:{get_ItemAdded:function(){return 0},get_ItemRemoved:function(){return 1}}}))}(),function(){$namespace.register("joopl.collections"),$global.joopl.collections.ObservableList=$def({$constructor:function(n){this.$base.$ctor(n),this.$_.changedHandlers=[]},$members:{raiseHandlers:function(n,t){for(var i in this.$_.changedHandlers)this.$_.changedHandlers[i](n,t)},addChangedListener:function(n){this.$_.changedHandlers.push(n)},add:function(n){this.$base.add(n),this.raiseHandlers($global.joopl.collections.ObservableListReason.itemAdded,{item:n,index:this.count()-1})},removeAt:function(n){var t=this.$base.removeAt(n);return this.raiseHandlers($global.joopl.collections.ObservableListReason.itemRemoved,{item:t,index:n}),t}},$extends:$global.joopl.collections.List})}();var $binder=null;(function(){$namespace.register("joopl.ui"),$binder=$new($def({$constructor:function(){},$members:{"for":function(n){return $new($global.joopl.ui.Binder,{cssSelector:n})}}})),$global.joopl.ui.Binder=$def({$constructor:function(n){if(this.$_.boundObject=null,this.$_.element=$(n.cssSelector),this.$_.element.length==0)throw Error("Given CSS selector matched no element");},$members:{get_BoundObject:function(){return this.$_.boundObject},set_BoundObject:function(n){this.$_.boundObject=n},get_Element:function(){return this.$_.element},object:function(){return this.boundObject=obj,$new($global.joopl.ui.PropertyBinder,{binder:this})},collection:function(n){if(typeof n!="object"||!n.length)throw Error("The given argument is not an array!");return this.$_.boundObject=$new($global.joopl.collections.ObservableList,{array:n}),$new($global.joopl.ui.CollectionBinder,{binder:this})}}})})(),function(){$namespace.register("joopl.ui"),$global.joopl.ui.PropertyBinder=$def({$constructor:function(n){this.$_.valueFunc=null,this.$_.boundObject=n.binder.boundObject,this.$_.element=n.binder.element,this.$_.propertyPredicate=null},$members:{get_BoundObject:function(){return this.$_.boundObject},get_Element:function(){return this.$_.element},get_ValueFunc:function(){return this.$_.valueFunc},set_ValueFunc:function(n){this.$_.valueFunc=n},get_PropertyPredicate:function(){return this.$_.propertyPredicate},set_PropertyPredicate:function(n){this.$_.propertyPredicate=n},property:function(n){if(this.propertyPredicate=n,!this.valueFunc){var t=this.element.prop("nodeName");switch(t.toLowerCase()){case"input":case"textarea":case"select":case"button":this.valueFunc=function(n){if(n)this.element.val(n);else return this.element.val()}.bind(this);break;default:this.valueFunc=function(n){if(n)this.element.text(n);else return this.element.text()}.bind(this)}}return $new($global.joopl.ui.EventBinder,{binder:this})}}})}(),function(){$namespace.register("joopl.ui"),$global.joopl.ui.EventBinder=$def({$constructor:function(n){this.$_.element=n.binder.element,this.$_.boundObject=n.binder.boundObject,this.$_.valueFunc=n.binder.valueFunc,this.$_.propertyPredicate=n.binder.propertyPredicate},$members:{get_BoundObject:function(){return this.$_.boundObject},get_ValueFunc:function(){return this.$_.valueFunc},get_Element:function(){return this.$_.element},get_PropertyPredicate:function(){return this.$_.propertyPredicate},event:function(n){this.element.on(n,function(){this.propertyPredicate(this.boundObject,this.valueFunc())}.bind(this));return $new($global.joopl.ui.TwoWayBinder,{binder:this})}}})}(),function(){$namespace.register("joopl.ui"),$global.joopl.ui.CollectionBinder=$def({$constructor:function(n){this.$_.boundObject=n.binder.boundObject,this.$_.element=n.binder.element},$members:{get_Observable:function(){return this.$_.boundObject},get_Element:function(){return this.$_.element},itemTemplate:function(n){if(this.observable.items.length>0)for(var t in this.observable.items)this.element.append(n(this.observable.items[t]));return this.observable.addChangedListener(function(t,i){var r=n(i.item,i.index);switch(t){case $global.joopl.collections.ObservableListReason.itemAdded:this.element.append(r);break;case $global.joopl.collections.ObservableListReason.itemRemoved:$(this.element.children()[i.index]).remove()}}.bind(this)),this}}})}(),function(){$namespace.register("joopl.ui"),$global.joopl.ui.TwoWayBinder=$def({$constructor:function(n){this.$_.boundObject=n.binder.boundObject,this.$_.valueFunc=n.binder.valueFunc},$members:{get_BoundObject:function(){return this.$_.boundObject},get_ValueFunc:function(){return this.$_.valueFunc},twoWay:function(){var i;if(!this.boundObject)throw Error("No object has been bound to the binder");var n={},t=this,r=function(i){Object.defineProperty(n,i,{get:function(){return t.boundObject[i]},set:function(n){t.boundObject[i]=n,t.valueFunc(n)},configurable:!1})};for(i in this.boundObject)this.boundObject.hasOwnProperty(i)&&r(i);return Object.preventExtensions(n),n}}})}()